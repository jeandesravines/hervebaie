{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "pictures": {
      "$user_id": {
        ".indexOn": [
          "id",
          "title"
        ],
        ".read": "root.child('users/' + $user_id).exists()",
        ".write": "root.child('users/' + $user_id).exists()",
        "$picture_id": {
          ".validate": "newData.hasChildren(['id'])",
          "datas": {
            "$data_id": {
              ".write": "root.child('/picture-datas/' + $user_id + '/' + $picture_id + '/' + $data_id).exists()",
              ".validate": "newData.val() === true"
            }
          }
        }
      }
    },
    "picture_datas": {
      "$user_id": {
        ".read": "root.child('users/' + $user_id).exists()",
        ".write": "root.child('users/' + $user_id).exists()",
        "$picture_id": {
          ".indexOn": [
            "id"
          ],
          "$data_id": {
            ".validate": "newData.hasChildren(['id', 'data'])"
          }
        }
      }
    }
  }
}